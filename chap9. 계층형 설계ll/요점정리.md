## 계층형 설계 패턴

- ## 패턴 1: 직접 구현
  - `직접 구현`은 계층형 설계 구조를 만드는 데 도움이 된다. `직접 구현`된 함수를 읽을 때, 함수 시그니처가 나타내고 있는 문제를 함수본문에서 적절한 구체화 수준에서 해결해야 한다. 만약 너무 구체적이라면 코드에서 나는 냄새다.
- ## 패턴 2: 추상화 벽
  - 호출 그래프에 어떤 계층은 중요한 세부 구현을 감추고 인터페이스를 제공한다. 인터페이스를 사용하여 코드를 만들면 높은 차원으로 생각할 수 이있다. 고수준의 `추상화` 단계만 생각하면 되기 때문에 두뇌 용량의 한계를 극복할 수 있다.
- ## 패턴 3: 작은 인터페이스
  - 시스템이 커질수록 비즈니스 개념을 나타내는 중요한 인터페이스는 작고 강력한 동작으로 구성하는 것이 좋다. 다른 동작도 직간접적으로 최소한의 인터페이스를 유지하면서 정의해아 한다.
- ## 패턴 4: 편리한 계층
  - 계층형 설계 패턴과 실천 방법은 개발자의 요구를 만족시키면서 비즈니스 문제를 잘 풀 수 있어야 한다. 소프트웨어를 더 빠르고 고품질로 제공하는 데 도움이 되는 계층에 시간을 투자해야 한다. 그냥 좋아서 계층을 추가하면 안된다. 코드와 그 코드가 속한 추상화 계층은 작업할 때 편리해야 한다.

## 요점 정리

- 추상화 벽 패턴을 사용하면 세부적인 것을 완벽히 감출 수 있기 때문에 더 높은 차원에서 생각할 수 있다.

```javascript
// 추상화 벽은 데이터 구조를 몰라도 함수를 사용할 수 있다는 것을 의미한다.
function add_item(cart, item) {
  return add_element_last(cart, item);
}
```

- 작은 인터페이스 패턴을 사용하면 완성된 인터페이스에 가깝게 계층을 만들 수 있다. 중요한 비즈니스 개념을 표현하는 인터페이스는 한번 잘 만들어 놓고 더 바뀌거나 늘어나지 않아야 한다.

```javascript
// 장바구니에 watch가 있으면 100달러 이상일 때 할인을 적용한다
function getWatchDiscount(cart) {
  const total = calcTotal(cart);
  const hasMatch = isInCart(cart, "watch");
  return total > 100 && hasMatch;
}
```

- 편리한 계층 패턴을 이용하면 다른 패턴을 요구 사항에 맞게 사용할 잇다. 패턴을 사용하다 보면 너무 과한 추상화를 할 수 있다. 패턴들은 요구 사항에 맞게 적용해야 한다.

```javascript

```

- 호출 그래프 구조에서 규칙을 얻을 수 있다. 이 규칙으로 어떤 코드를 테스트하는 것이 가장 좋은지, 유지보수나 재사용하기 좋은 코드는 어디에 있는 코드인지 알 수 있다.

```javascript

```
